package ex32;

import static v.ArrayUtils.*;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

import st.BSTX;

/* p417
  3.2.9  Draw all the different BST shapes that can result when N
  keys are inserted into an initially empty tree, for  
  N = 2, 3, 4, 5 and 6.
  
  This is automated below using preorder to differentiate the shapes.
 
*/

public class Ex3209AllBSTShapesWith5Keys2 {
  
  public static void drawAllUniqueShapes() {
    Integer[] a = {2,3,4,5,6}, b = rangeInteger(0,5), 
        d = new Integer[5], e; String es, ds;
    int[] c;
    Map<String, String> map1 = new HashMap<>();
    Map<String,BSTX<Integer,Integer>> map2 = new HashMap<>();
    BSTX<Integer,Integer> bst;
    Iterator<int[]> it = permutations(range(0,5));
    while(it.hasNext()) {
      c = it.next();
      for (int i = 0; i < d.length; i++) d[i] = a[c[i]];
      bst = new BSTX<Integer,Integer>(d,b);
      e = bst.toPreOrderArray();
      ds = arrayToString(d,80,1,1);
      es = arrayToString(e,80,1,1);
      if (map1.containsKey(es)) map1.put(es, map1.get(es)+" "+ds);
      else map1.put(es, ds);
      if (!map2.containsKey(es)) map2.put(es, bst);
    }
    assert map1.size() == map2.size();
    System.out.println("there are "+map1.size()+" unique shapes as follows:\n");   
    for (String q : map1.keySet()) {
      System.out.println(map1.get(q));
      BSTX<Integer,Integer> bx = map2.get(q);
      bx.printTree(); System.out.println();
    } 
  }
  
  public static void main(String[] args) {
    
    drawAllUniqueShapes();
/*
there are 42 unique shapes as follows:

[6,2,3,4,5]
 \-----6
       |                     /-----5
       |              /-----4
       |       /-----3
        \-----2

[6,2,3,5,4]
 \-----6
       |              /-----5
       |             |       \-----4
       |       /-----3
        \-----2

[6,4,5,3,2] [6,4,3,5,2] [6,4,3,2,5]
 \-----6
       |       /-----5
        \-----4
               \-----3
                      \-----2

[3,6,4,2,5] [3,6,4,5,2] [3,6,2,4,5] [3,2,6,4,5]
|       /-----6
|      |      |       /-----5
|      |       \-----4
 \-----3
        \-----2

[3,6,5,4,2] [3,6,5,2,4] [3,2,6,5,4] [3,6,2,5,4]
|       /-----6
|      |       \-----5
|      |              \-----4
 \-----3
        \-----2

[2,5,3,4,6] [2,5,3,6,4] [2,5,6,3,4]
|              /-----6
|       /-----5
|      |      |       /-----4
|      |       \-----3
 \-----2

[2,6,5,3,4]
|       /-----6
|      |       \-----5
|      |             |       /-----4
|      |              \-----3
 \-----2

[2,6,5,4,3]
|       /-----6
|      |       \-----5
|      |              \-----4
|      |                     \-----3
 \-----2

[5,6,4,2,3] [5,4,6,2,3] [5,4,2,6,3] [5,4,2,3,6]
|       /-----6
 \-----5
        \-----4
              |       /-----3
               \-----2

[6,4,2,3,5] [6,4,2,5,3] [6,4,5,2,3]
 \-----6
       |       /-----5
        \-----4
              |       /-----3
               \-----2

[3,5,4,2,6] [3,5,4,6,2] [3,5,6,4,2] [3,5,6,2,4] [3,5,2,6,4] [3,5,2,4,6]
[3,2,5,4,6] [3,2,5,6,4]
|              /-----6
|       /-----5
|      |       \-----4
 \-----3
        \-----2

[6,5,4,2,3]
 \-----6
        \-----5
               \-----4
                     |       /-----3
                      \-----2

[6,5,4,3,2]
 \-----6
        \-----5
               \-----4
                      \-----3
                             \-----2

[3,4,2,5,6] [3,4,5,6,2] [3,4,5,2,6] [3,2,4,5,6]
|                     /-----6
|              /-----5
|       /-----4
 \-----3
        \-----2

[2,3,6,4,5]
|              /-----6
|             |      |       /-----5
|             |       \-----4
|       /-----3
 \-----2

[4,5,6,3,2] [4,5,3,6,2] [4,5,3,2,6] [4,3,5,2,6] [4,3,5,6,2] [4,3,2,5,6]
|              /-----6
|       /-----5
 \-----4
        \-----3
               \-----2

[3,4,2,6,5] [3,4,6,2,5] [3,4,6,5,2] [3,2,4,6,5]
|              /-----6
|             |       \-----5
|       /-----4
 \-----3
        \-----2

[2,3,6,5,4]
|              /-----6
|             |       \-----5
|             |              \-----4
|       /-----3
 \-----2

[4,6,5,3,2] [4,3,6,5,2] [4,6,3,5,2] [4,6,3,2,5] [4,3,6,2,5] [4,3,2,6,5]
|       /-----6
|      |       \-----5
 \-----4
        \-----3
               \-----2

[2,6,4,5,3] [2,6,4,3,5]
|       /-----6
|      |      |       /-----5
|      |       \-----4
|      |              \-----3
 \-----2

[2,6,3,5,4]
|       /-----6
|      |      |       /-----5
|      |      |      |       \-----4
|      |       \-----3
 \-----2

[6,5,3,4,2] [6,5,3,2,4]
 \-----6
        \-----5
              |       /-----4
               \-----3
                      \-----2

[5,6,3,4,2] [5,3,6,4,2] [5,3,4,6,2] [5,3,4,2,6] [5,3,2,4,6] [5,3,2,6,4] 
[5,3,6,2,4] [5,6,3,2,4]
|       /-----6
 \-----5
       |       /-----4
        \-----3
               \-----2

[2,4,5,3,6] [2,4,5,6,3] [2,4,3,5,6]
|                     /-----6
|              /-----5
|       /-----4
|      |       \-----3
 \-----2

[2,4,6,5,3] [2,4,6,3,5] [2,4,3,6,5]
|              /-----6
|             |       \-----5
|       /-----4
|      |       \-----3
 \-----2

[2,6,3,4,5]
|       /-----6
|      |      |              /-----5
|      |      |       /-----4
|      |       \-----3
 \-----2

[6,2,5,3,4]
 \-----6
       |       /-----5
       |      |      |       /-----4
       |      |       \-----3
        \-----2

[6,2,5,4,3]
 \-----6
       |       /-----5
       |      |       \-----4
       |      |              \-----3
        \-----2

[5,2,4,3,6] [5,2,4,6,3] [5,2,6,4,3] [5,6,2,4,3]
|       /-----6
 \-----5
       |       /-----4
       |      |       \-----3
        \-----2

[2,3,5,6,4] [2,3,5,4,6]
|                     /-----6
|              /-----5
|             |       \-----4
|       /-----3
 \-----2

[2,3,4,5,6]
|                            /-----6
|                     /-----5
|              /-----4
|       /-----3
 \-----2

[2,3,4,6,5]
|                     /-----6
|                    |       \-----5
|              /-----4
|       /-----3
 \-----2

[2,5,6,4,3] [2,5,4,6,3] [2,5,4,3,6]
|              /-----6
|       /-----5
|      |       \-----4
|      |              \-----3
 \-----2

[6,3,4,2,5] [6,3,4,5,2] [6,3,2,4,5]
 \-----6
       |              /-----5
       |       /-----4
        \-----3
               \-----2

[6,3,5,4,2] [6,3,5,2,4] [6,3,2,5,4]
 \-----6
       |       /-----5
       |      |       \-----4
        \-----3
               \-----2

[4,2,3,5,6] [4,2,5,6,3] [4,2,5,3,6] [4,5,2,3,6] [4,5,2,6,3] [4,5,6,2,3]
|              /-----6
|       /-----5
 \-----4
       |       /-----3
        \-----2

[4,2,3,6,5] [4,2,6,3,5] [4,6,2,3,5] [4,6,2,5,3] [4,2,6,5,3] [4,6,5,2,3]
|       /-----6
|      |       \-----5
 \-----4
       |       /-----3
        \-----2

[6,5,2,3,4]
 \-----6
        \-----5
              |              /-----4
              |       /-----3
               \-----2

[6,5,2,4,3]
 \-----6
        \-----5
              |       /-----4
              |      |       \-----3
               \-----2

[5,4,3,2,6] [5,4,3,6,2] [5,4,6,3,2] [5,6,4,3,2]
|       /-----6
 \-----5
        \-----4
               \-----3
                      \-----2

[6,2,4,5,3] [6,2,4,3,5]
 \-----6
       |              /-----5
       |       /-----4
       |      |       \-----3
        \-----2

[5,6,2,3,4] [5,2,6,3,4] [5,2,3,6,4] [5,2,3,4,6]
|       /-----6
 \-----5
       |              /-----4
       |       /-----3
        \-----2

*/
  
  }

}

