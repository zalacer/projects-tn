package ch12.datetime;

import java.time.LocalDate;
import java.time.temporal.TemporalAdjuster;
import java.time.temporal.TemporalAdjusters;
import java.util.ArrayList;
import java.util.List;
import java.util.function.Predicate;

// 6. List all Friday the 13th in the twentieth century.

public class Ch1206Friday13ths {

  public static TemporalAdjuster next(Predicate<LocalDate> p) {
    return TemporalAdjusters.ofDateAdjuster(w -> {
      LocalDate result = w;
      do {
        result = result.plusDays(1);
      } while (!p.test(result));
      return result;
    });
  }

  public static LocalDate getNextFri13th(LocalDate ld) {
    return ld.with(next(d -> d.getDayOfWeek().getValue() == 5 && d.getDayOfMonth() == 13));
  }

  public static List<LocalDate> listFri13thsIn20thCent() {
    List<LocalDate> ldlist = new ArrayList<>();
    LocalDate nextFri13th = getNextFri13th(LocalDate.of(1900, 1, 1));
    do {
      ldlist.add(nextFri13th);
      nextFri13th = getNextFri13th(nextFri13th);
    } while(nextFri13th.getYear() < 2000);
    return ldlist;
  }

  public static void main(String[] args) {

    List<LocalDate> fri13thList = listFri13thsIn20thCent();
    System.out.println("fri13thList.size: "+fri13thList.size());
    for (LocalDate d : fri13thList) System.out.println(d);
    //  output:
    //  fri13thList.size: 172
    //  1900-04-13
    //  1900-07-13
    //  1901-09-13
    //  1901-12-13
    //  1902-06-13
    //  1903-02-13
    //  1903-03-13
    //  1903-11-13
    //  1904-05-13
    //  1905-01-13
    //  1905-10-13
    //  1906-04-13
    //  1906-07-13
    //  1907-09-13
    //  1907-12-13
    //  1908-03-13
    //  1908-11-13
    //  1909-08-13
    //  1910-05-13
    //  1911-01-13
    //  1911-10-13
    //  1912-09-13
    //  1912-12-13
    //  1913-06-13
    //  1914-02-13
    //  1914-03-13
    //  1914-11-13
    //  1915-08-13
    //  1916-10-13
    //  1917-04-13
    //  1917-07-13
    //  1918-09-13
    //  1918-12-13
    //  1919-06-13
    //  1920-02-13
    //  1920-08-13
    //  1921-05-13
    //  1922-01-13
    //  1922-10-13
    //  1923-04-13
    //  1923-07-13
    //  1924-06-13
    //  1925-02-13
    //  1925-03-13
    //  1925-11-13
    //  1926-08-13
    //  1927-05-13
    //  1928-01-13
    //  1928-04-13
    //  1928-07-13
    //  1929-09-13
    //  1929-12-13
    //  1930-06-13
    //  1931-02-13
    //  1931-03-13
    //  1931-11-13
    //  1932-05-13
    //  1933-01-13
    //  1933-10-13
    //  1934-04-13
    //  1934-07-13
    //  1935-09-13
    //  1935-12-13
    //  1936-03-13
    //  1936-11-13
    //  1937-08-13
    //  1938-05-13
    //  1939-01-13
    //  1939-10-13
    //  1940-09-13
    //  1940-12-13
    //  1941-06-13
    //  1942-02-13
    //  1942-03-13
    //  1942-11-13
    //  1943-08-13
    //  1944-10-13
    //  1945-04-13
    //  1945-07-13
    //  1946-09-13
    //  1946-12-13
    //  1947-06-13
    //  1948-02-13
    //  1948-08-13
    //  1949-05-13
    //  1950-01-13
    //  1950-10-13
    //  1951-04-13
    //  1951-07-13
    //  1952-06-13
    //  1953-02-13
    //  1953-03-13
    //  1953-11-13
    //  1954-08-13
    //  1955-05-13
    //  1956-01-13
    //  1956-04-13
    //  1956-07-13
    //  1957-09-13
    //  1957-12-13
    //  1958-06-13
    //  1959-02-13
    //  1959-03-13
    //  1959-11-13
    //  1960-05-13
    //  1961-01-13
    //  1961-10-13
    //  1962-04-13
    //  1962-07-13
    //  1963-09-13
    //  1963-12-13
    //  1964-03-13
    //  1964-11-13
    //  1965-08-13
    //  1966-05-13
    //  1967-01-13
    //  1967-10-13
    //  1968-09-13
    //  1968-12-13
    //  1969-06-13
    //  1970-02-13
    //  1970-03-13
    //  1970-11-13
    //  1971-08-13
    //  1972-10-13
    //  1973-04-13
    //  1973-07-13
    //  1974-09-13
    //  1974-12-13
    //  1975-06-13
    //  1976-02-13
    //  1976-08-13
    //  1977-05-13
    //  1978-01-13
    //  1978-10-13
    //  1979-04-13
    //  1979-07-13
    //  1980-06-13
    //  1981-02-13
    //  1981-03-13
    //  1981-11-13
    //  1982-08-13
    //  1983-05-13
    //  1984-01-13
    //  1984-04-13
    //  1984-07-13
    //  1985-09-13
    //  1985-12-13
    //  1986-06-13
    //  1987-02-13
    //  1987-03-13
    //  1987-11-13
    //  1988-05-13
    //  1989-01-13
    //  1989-10-13
    //  1990-04-13
    //  1990-07-13
    //  1991-09-13
    //  1991-12-13
    //  1992-03-13
    //  1992-11-13
    //  1993-08-13
    //  1994-05-13
    //  1995-01-13
    //  1995-10-13
    //  1996-09-13
    //  1996-12-13
    //  1997-06-13
    //  1998-02-13
    //  1998-03-13
    //  1998-11-13
    //  1999-08-13

  }

}

